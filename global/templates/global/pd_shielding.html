{%  extends 'global/main.html' %}
{% load static %}
{% block content %}
{% load crispy_forms_tags %}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.css">
<link href="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.css">

<style>
    .carousel {
        position: sticky;
        margin-bottom: 100px;
      }
      .carousel-item img {
        object-fit: cover;
      }
      #carousel-thumbs {
        background: rgba(17, 73, 95, .2);
        bottom: -128px;
        left: 0;
        padding: 0 50px;
        right: 0;
      }
      #carousel-thumbs img {
        border: 3px solid transparent;
        cursor: pointer;
      }
      #carousel-thumbs img:hover {
        border-color: rgba(255,255,255,.3);
      }
      #carousel-thumbs .selected img {
        border-color: #1b87b0;
      }
      .carousel-control-prev,
      .carousel-control-next {
        width: 50px;
        filter: invert(50%);
      }
      @media all and (max-width: 767px) {
        .carousel-container #carousel-thumbs img {
          border-width: 3px;
        }
      }
      @media all and (min-width: 576px) {
        .carousel-container #carousel-thumbs {
          position: absolute;
        }
      }
      @media all and (max-width: 576px) {
        .carousel-container #carousel-thumbs {
          background: rgba(17, 73, 95, .2);
        }
      }
      
     

    @media (max-width: 575.98px) { 
        #carousel-thumbs {
            bottom: 0px; 
          }
          .carousel {
            margin-bottom: 0px;
          }
          .position-relative {
            margin-bottom: 0px;
          }
     }

    
    @media (max-width: 767.98px) { 
        #carousel-thumbs {
            bottom: -62px;
          }
     }


    @media (min-width: 768px) and (max-width: 991.98px) { 
        #carousel-thumbs {
            bottom: -82px;
          }
     }

 
    @media (min-width: 992px) and (max-width: 1199.98px) { 
        #carousel-thumbs {
            bottom: -108px;  
          }
     } 

    


</style>

<section>
    <div class="full-width">
        <div style="background: none !important" class="jumbotron jumbotron-fluid m-0">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6 text-left" >
                        <img src="{% static 'images/lightning_bolt_icon.svg' %}" alt="" class="icon-background">
                        <div class="container">
                            <h1 class="display-4 display-4-custom">High Voltage Testing Chambers</h1>
                            <p class="lead mt-4">Partial Discharge (PD) shielding is an essential component in Ultra High Voltage (UHV) laboratories. 
                                This coupled with other special requirement such as earthing, grounding, and insulation 
                                help to provide an optimal environment for PD testing on high voltage component such as transformers and switchgears. 
                            </p>
                        </div>
                    </div>
                    <div class="col-lg-6 text-left">
                        <img class="w-100 mb-4" src="{% static 'images/pd_radio_spectrum.png' %}" alt="PD Radio Frequency Spectrum" >  
                    </div>
                </div>
                <div class= "row">
                    <div class="container">
                        <div class="carousel-container position-relative row">
                            <div id="myCarousel" class="carousel slide" data-ride="carousel">
                                <div class="carousel-inner" style=" width:100%; max-height:600px !important;">
                                    <div class="carousel-item active" data-slide-number="0">
                                        <img src="{% static 'images/pd_chamber_1.jpeg' %}" class="d-block w-100" alt="PD Chamber 1" data-remote="{% static 'images/pd_chamber_1.jpeg' %}" data-type="image" data-toggle="lightbox" data-gallery="example-gallery">
                                    </div>
                                    <div class="carousel-item" data-slide-number="1">
                                        <img src="{% static 'images/pd_chamber_2.jpeg' %}"class="d-block w-100" alt="PD Chamber 2" data-remote="{% static 'images/pd_chamber_2.jpeg' %}" data-type="image" data-toggle="lightbox" data-gallery="example-gallery">
                                    </div>
                                    <div class="carousel-item" data-slide-number="2">
                                        <img src="{% static 'images/pd_chamber_3.jpeg' %}" class="d-block w-100" alt="PD Chamber 3" data-remote="{% static 'images/pd_chamber_3.jpeg' %}" data-type="image" data-toggle="lightbox" data-gallery="example-gallery">
                                    </div>
                                    <div class="carousel-item" data-slide-number="3">
                                        <img src="{% static 'images/pd_chamber_4.jpeg' %}" class="d-block w-100" alt="PD Chamber 4" data-remote="{% static 'images/pd_chamber_4.jpeg' %}" data-type="image" data-toggle="lightbox" data-gallery="example-gallery">
                                    </div>
                                    <div class="carousel-item" data-slide-number="4">
                                        <img src="{% static 'images/pd_chamber_6.jpeg' %}" class="d-block w-100" alt="PD Chamber 6" data-remote="{% static 'images/pd_chamber_6.jpeg' %}" data-type="image" data-toggle="lightbox" data-gallery="example-gallery">
                                    </div>
                                    <div class="carousel-item" data-slide-number="5">
                                        <img src="{% static 'images/pd_chamber_7.jpeg' %}" class="d-block w-100" alt="PD Chamber 7" data-remote="{% static 'images/pd_chamber_7.jpeg' %}" data-type="image" data-toggle="lightbox" data-gallery="example-gallery">
                                    </div>
                                    <div class="carousel-item" data-slide-number="6">
                                        <img src="{% static 'images/pd_chamber_8.jpeg' %}" class="d-block w-100" alt="PD Chamber 8" data-remote="{% static 'images/pd_chamber_8.jpeg' %}" data-type="image" data-toggle="lightbox" data-gallery="example-gallery">
                                    </div>
                                    <div class="carousel-item" data-slide-number="7">
                                        <img src="{% static 'images/pd_chamber_9.jpeg' %}" class="d-block w-100" alt="PD Chamber 9" data-remote="{% static 'images/pd_chamber_9.jpeg' %}" data-type="image" data-toggle="lightbox" data-gallery="example-gallery">
                                    </div>   
                                    <div class="carousel-item" data-slide-number="8">
                                        <img src="{% static 'images/pd_chamber_1.jpeg' %}" class="d-block w-100" alt="PD Chamber 1" data-remote="{% static 'images/pd_chamber_1.jpeg' %}" data-type="image" data-toggle="lightbox" data-gallery="example-gallery">
                                    </div> 
                                    <div class="carousel-item" data-slide-number="9">
                                        <img src="{% static 'images/pd_chamber_2.jpeg' %}" class="d-block w-100" alt="PD Chamber 2" data-remote="{% static 'images/pd_chamber_2.jpeg' %}" data-type="image" data-toggle="lightbox" data-gallery="example-gallery">
                                    </div> 
                                    <div class="carousel-item" data-slide-number="10">
                                        <img src="{% static 'images/pd_chamber_3.jpeg' %}" class="d-block w-100" alt="PD Chamber 3" data-remote="{% static 'images/pd_chamber_3.jpeg' %}" data-type="image" data-toggle="lightbox" data-gallery="example-gallery">
                                    </div> 
                                    <div class="carousel-item" data-slide-number="11">
                                        <img src="{% static 'images/pd_chamber_4.jpeg' %}" class="d-block w-100" alt="PD Chamber 4" data-remote="{% static 'images/pd_chamber_4.jpeg' %}" data-type="image" data-toggle="lightbox" data-gallery="example-gallery">
                                    </div> 
                                </div>
                            </div>
                        
                            <!-- Carousel Navigation -->
                            <div id="carousel-thumbs" class="carousel slide" data-ride="carousel">
                                <div class="carousel-inner">
                                    <div class="carousel-item active">
                                        <div class="row mx-0">
                                            <div id="carousel-selector-0" class="thumb col-4 col-sm-2 px-1 py-2 selected" data-target="#myCarousel" data-slide-to="0">
                                                <img src="{% static 'images/pd_chamber_1.jpeg' %}" class="img-fluid" alt="PD Chamber 1">
                                            </div>
                                            <div id="carousel-selector-1" class="thumb col-4 col-sm-2 px-1 py-2" data-target="#myCarousel" data-slide-to="1">
                                                <img src="{% static 'images/pd_chamber_2.jpeg' %}" class="img-fluid" alt="PD Chamber 2">
                                            </div>
                                            <div id="carousel-selector-2" class="thumb col-4 col-sm-2 px-1 py-2" data-target="#myCarousel" data-slide-to="2">
                                                <img src="{% static 'images/pd_chamber_3.jpeg' %}" class="img-fluid" alt="PD Chamber 3">
                                            </div>
                                            <div id="carousel-selector-3" class="thumb col-4 col-sm-2 px-1 py-2" data-target="#myCarousel" data-slide-to="3">
                                                <img src="{% static 'images/pd_chamber_4.jpeg' %}" class="img-fluid" alt="PD Chamber 4">
                                            </div>
                                            <div id="carousel-selector-4" class="thumb col-4 col-sm-2 px-1 py-2" data-target="#myCarousel" data-slide-to="4">
                                                <img src="{% static 'images/pd_chamber_6.jpeg' %}" class="img-fluid" alt="PD Chamber 6">
                                            </div>
                                            <div id="carousel-selector-5" class="thumb col-4 col-sm-2 px-1 py-2" data-target="#myCarousel" data-slide-to="5">
                                                <img src="{% static 'images/pd_chamber_7.jpeg' %}" class="img-fluid" alt="PD Chamber 7">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="carousel-item">
                                        <div class="row mx-0">
                                            <div id="carousel-selector-6" class="thumb col-4 col-sm-2 px-1 py-2" data-target="#myCarousel" data-slide-to="6">
                                                <img src="{% static 'images/pd_chamber_8.jpeg' %}" class="img-fluid" alt="PD Chamber 8">
                                            </div>
                                            <div id="carousel-selector-7" class="thumb col-4 col-sm-2 px-1 py-2" data-target="#myCarousel" data-slide-to="7">
                                                <img src="{% static 'images/pd_chamber_9.jpeg' %}" class="img-fluid" alt="PD Chamber 9">
                                            </div>
                                            <div id="carousel-selector-8" class="thumb col-4 col-sm-2 px-1 py-2" data-target="#myCarousel" data-slide-to="8">
                                                <img src="{% static 'images/pd_chamber_1.jpeg' %}" class="img-fluid" alt="PD Chamber 1">
                                            </div>
                                            <div id="carousel-selector-9" class="thumb col-4 col-sm-2 px-1 py-2" data-target="#myCarousel" data-slide-to="9">
                                                <img src="{% static 'images/pd_chamber_2.jpeg' %}" class="img-fluid" alt="PD Chamber 2">
                                            </div>
                                            <div id="carousel-selector-10" class="thumb col-4 col-sm-2 px-1 py-2" data-target="#myCarousel" data-slide-to="10">
                                                <img src="{% static 'images/pd_chamber_3.jpeg' %}" class="img-fluid" alt="PD Chamber 3">
                                            </div>
                                            <div id="carousel-selector-11" class="thumb col-4 col-sm-2 px-1 py-2" data-target="#myCarousel" data-slide-to="11">
                                                <img src="{% static 'images/pd_chamber_4.jpeg' %}" class="img-fluid" alt="PD Chamber 4">
                                            </div>
            
                                        </div>
                                    </div>
                                </div>
                                <a class="carousel-control-prev" href="#carousel-thumbs" role="button" data-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Previous</span>
                                </a>
                                <a class="carousel-control-next" href="#carousel-thumbs" role="button" data-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Next</span>
                                </a>
                            </div>
                        </div> <!-- /row -->
                    </div> <!-- /container -->
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    $('#myCarousel').carousel({
        interval: false
      });
      $('#carousel-thumbs').carousel({
        interval: false
      });
      
      // handles the carousel thumbnails
      // https://stackoverflow.com/questions/25752187/bootstrap-carousel-with-thumbnails-multiple-carousel
      $('[id^=carousel-selector-]').click(function() {
        var id_selector = $(this).attr('id');
        var id = parseInt( id_selector.substr(id_selector.lastIndexOf('-') + 1) );
        $('#myCarousel').carousel(id);
      });
      // Only display 3 items in nav on mobile.
      if ($(window).width() < 575) {
        $('#carousel-thumbs .row div:nth-child(4)').each(function() {
          var rowBoundary = $(this);
          $('<div class="row mx-0">').insertAfter(rowBoundary.parent()).append(rowBoundary.nextAll().addBack());
        });
        $('#carousel-thumbs .carousel-item .row:nth-child(even)').each(function() {
          var boundary = $(this);
          $('<div class="carousel-item">').insertAfter(boundary.parent()).append(boundary.nextAll().addBack());
        });
      }
      // Hide slide arrows if too few items.
      if ($('#carousel-thumbs .carousel-item').length < 2) {
        $('#carousel-thumbs [class^=carousel-control-]').remove();
        $('.machine-carousel-container #carousel-thumbs').css('padding','0 5px');
      }
      // when the carousel slides, auto update
      $('#myCarousel').on('slide.bs.carousel', function(e) {
        var id = parseInt( $(e.relatedTarget).attr('data-slide-number') );
        $('[id^=carousel-selector-]').removeClass('selected');
        $('[id=carousel-selector-'+id+']').addClass('selected');
      });
      // when user swipes, go next or previous
      $('#myCarousel').swipe({
        fallbackToMouseEvents: true,
        swipeLeft: function(e) {
          $('#myCarousel').carousel('next');
        },
        swipeRight: function(e) {
          $('#myCarousel').carousel('prev');
        },
        allowPageScroll: 'vertical',
        preventDefaultEvents: false,
        threshold: 75
      });
      /*
      $(document).on('click', '[data-toggle="lightbox"]', function(event) {
        event.preventDefault();
        $(this).ekkoLightbox();
      });
      */
      
      $('#myCarousel .carousel-item img').on('click', function(e) {
        var src = $(e.target).attr('data-remote');
        if (src) $(this).ekkoLightbox();
      });
</script>

{% endblock %}